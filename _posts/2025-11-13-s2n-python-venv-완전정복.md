---
layout: post
title: "[s2n] python venv 완전정복"
date: 2025-11-13 01:38:59 +0900
categories: velog
series: "s2n"
---

이번 프로젝트에서도 venv를 사용했는데 이게 뭔지, 왜 쓰는지 잘 모르겠어서 개념을 정리해 보고자 이 포스팅을 작성하게 되었다.

### 1. venv란?
= virtual environment
즉, 프로젝트마다 독립된 파이썬 환경(파이썬 버전 + 패키지 목록)을 만들어주는 기술이다.
이 환경 안에는 파이썬 실행파일, pip 패키지, 우리가 설치한 모든 라이브러리가 모두 프로젝트 전용으로 따로 저장된다.
**즉, 시스템 전체의 파이썬과 충돌하지 않는다!**

### 2. venv가 필요한 이유는?
#### (1) 프로젝트마다 다른 패키지 버전이 필요함
예를 들어, 프로젝트 A는 Django==3.2, B는 Django==5.0 로 되어 있다고 하자.
venv를 사용하지 않으면, pip install을 하면 시스템 전체 패키지가 바뀌게 된다. A/B가 서로 다른 버전을 필요로 함에도 불구하고 둘 중 하나는 반드시 깨진다. 즉 라이브러리가 꼬이고, import 에러가 뜨고, 프로젝트 재현이 어려워진다.
venv를 사용하면, A의 venv에는 3.2, B의 venv에는 5.0이 독립적인 공간에서 사용되어 절대 충돌하지 않는다.

#### (2) 팀 프로젝트에서 환경 통일이 안 되면 재현이 안 됨!
- 난 되는데 왜 넌 안 됨?
- pip 패키지 버전 뭐더라?
- 난 로컬에서 3.11로 했는데 넌 왜 3.10이야?
- 패키지 버전 달라서 결과가 달라

이런 문제를 겪어본 적이 있을 것이다. 특히 우리 프로젝트는 beautifulsoup, selenium, requests, pytest 등 사용하는 게 많아서 의존성이 복잡해 팀원 한명이라도 버전이 어긋나면 전체가 깨질 수 있다.
이를 위해 venv + requirements.txt 조합을 사용하면 모든 팀원이 완벽히 동일한 환경에서 작업이 가능하다.

#### (3) 시스템 파이썬을 망가뜨리지 않기 위해
macOS는 내부적으로 여러 시스템 도구가 파이썬에 의존한다. 여기서 pip로 패키지를 설치하다 보면
- 시스템 파이썬 라이브러리 덮어쓰기
- 맥 기본 도구 고장
- PATH 충돌로 파이썬 명령 자체가 사라짐

등 아주 많은 문제들이 발생한다. 그래서 venv를 사용해 시스템 파이썬은 최소한으로 유지해야 한다.

#### (4) python 명령을 프로젝트별로 다르게 사용할 수 있다
venv를 켜지 않고 python -m ~~ 명령어를 실행하면 "zsh: command not found: python"이라는 결과가 나온다. 여기서 venv를 활성화하면 프로젝트 내부의 파이썬이 실행되어 명령어를 실행할 수 있다.
즉, venv는 python 명령 자체를 프로젝트 전용으로 바꿔주는 역할도 한다.

### 3. venv는 어떻게 동작하나?
.venv/ (혹은 .env/, .envs/)라는 폴더가 생성된다.
이 안에 
- bin/python (파이썬 실행파일)
- lib/python3.11/site-packages/ (패키지 설치 디렉토리)
- pip, pytest 등 CLI 도구

가 들어있다.
활성화를 하면 PATH의 최우선 순위를 .venv/bin으로 교체하게 된다. 즉 우리가 입력하는 모든 python/pip 명령이 가상환경 내부 명령으로 대체된다.

### 4. venv, pyenv는 다르다.
- pyenv: 파이썬 버전 관리자
- venv: 프로젝트별 패키지 격리 환경

우리 프로젝트에서는 이 두 개를 함께 사용중. 

### 결론
venv는
- 패키지 충돌 방지
- 시스템 파이썬 보호
- 팀 프로젝트 환경 통일
- python/pip 명령 프로젝트 전용 관리
- 재현성, 안정성 향상

특히 의존성이 많은 프로젝트에서는 무조건 있어야 한다!!!