name: "ğŸ‰ Velog â†’ Jekyll Auto Sync"

on:
    workflow_dispatch:
    schedule:
        - cron: '0 9 * * *' # ë§¤ì¼ 18ì‹œ(KST) ìë™ ì‹¤í–‰

jobs:
    sync:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4

            - name: Set up Python
              uses: actions/setup-python@v5
              with:
                  python-version: "3.11"

            - name: Install dependencies
              run: pip install feedparser requests beautifulsoup4

            - name: Wait for Velog RSS to update
              run: sleep 180 # RSS ê°±ì‹  ëŒ€ê¸° (3ë¶„)

            - name: Run Velog sync script
              run: python velog_to_jekyll_images.py

            - name: Capture latest post details
              id: latest
              run: python3 capture_latest_post.py